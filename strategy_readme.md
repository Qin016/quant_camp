# 简单期货量化交易策略说明

## 📋 策略概览

本项目实现了一个完整的期货量化交易系统，包含策略开发、信号生成、回测分析等完整流程。

## 🚀 策略实现

### 核心策略：布林带均值回归策略

**策略逻辑：**
- 基于布林带指标的均值回归策略
- 当价格突破上轨时做空（价格过高，预期回归）
- 当价格突破下轨时做多（价格过低，预期反弹）
- 价格回归中轨附近时平仓

**技术指标：**
- 移动平均线窗口：40期
- 布林带标准差倍数：2.0倍
- 采用收盘价计算

## 📊 合规性检查

✅ **所有交易规则符合要求：**

1. **仓位限制**：每个合约每个时点最多持仓1个单位
2. **仓位取值**：严格遵循 `[0, 1, -1]` 取值范围
3. **开收盘归零**：每个交易日开盘和收盘时仓位强制为0
4. **时间戳对齐**：仓位时间戳与行情数据完全对齐
5. **数据使用限制**：只使用当前及之前的行情数据
6. **测试日期**：从第2个交易日开始测试
7. **文件命名**：与测试数据文件名完全对齐
8. **主力合约**：只处理带"_M"标识的主力合约

## 💰 交易成本

- **手续费率**：0.23‱ (万分之0.23)
- **成交价格**：使用对手方1档价格
- **费用计算**：开仓和平仓均按此费率计算

## 📈 策略表现

根据回测结果（2024年10月9日-11月29日）：

### 整体表现
- **测试天数**：38个交易日
- **涵盖合约**：IF、IC、IH、IM四个主力合约
- **策略类型**：均值回归，适合震荡市场

### 各合约表现示例（部分日期）
```
日期         IF      IC      IH      IM      平均
20241009   3.25%   1.33%   3.30%   2.84%   2.68%
20241015   1.46%   0.85%   1.46%   0.62%   1.10%
20241018   3.22%   2.68%   2.58%   3.32%   2.95%
```

## 🔧 文件结构

```
./
├── simple_strategy.py      # 策略主文件
├── positions/             # 生成的仓位信号
│   ├── 20241009/
│   │   ├── IF_2410_L1_M.csv
│   │   ├── IC_2410_L1_M.csv
│   │   ├── IH_2410_L1_M.csv
│   │   └── IM_2410_L1_M.csv
│   └── ...
├── backtest.py            # 回测引擎
├── backtest/              # 回测结果
│   ├── all_rets.csv       # 汇总收益率
│   └── ...
└── analyze_performance.py # 策略分析工具
```

## 🎯 策略特点

**优势：**
- ✅ 逻辑简单清晰，易于理解和调试
- ✅ 参数较少，降低过拟合风险
- ✅ 适合高频交易，能捕捉短期价格回归
- ✅ 风险控制良好，有明确的出场条件

**适用场景：**
- 📊 震荡市场表现较好
- 📊 适合日内交易策略
- 📊 对市场微观结构敏感

**改进方向：**
- 🔧 可增加成交量过滤条件
- 🔧 可结合其他技术指标
- 🔧 可添加动态止损机制
- 🔧 可优化参数适应不同市场环境

## 🚀 运行方法

```bash
# 生成策略信号
python simple_strategy.py

# 运行回测
python backtest.py

# 分析策略表现
python analyze_performance.py
```

## 📞 总结

本策略成功实现了完整的期货量化交易流程，严格遵循所有交易规则，为期货高频交易提供了可靠的技术基础。策略具有良好的可扩展性，可作为更复杂策略开发的起点。
